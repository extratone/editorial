{"actions":[{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionGetSelectedText","parameters":{"emptySelectionOption":0,"foldedTextOption":0,"foldedTextReplacement":"â€¦","selectEntireLines":true}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionRunScript","parameters":{"script":"#coding: utf-8\nimport workflow\nimport requests\nimport sys\nimport webbrowser\n\n\ncontent = workflow.get_input()\nprint(content)\n\n# Replace the 'API_KEY' value below with your API key;\n# get one at https:\/\/micro.blog\/account\n\nAPI_KEY = \"XXXXXXXXXXXXXXXXXX\"\nHEADER_VALUE = \"Bearer \" + API_KEY\n\n# Grab input from Drafts\n\ndef send_request(content):\n    # Request\n    # POST https:\/\/micro.blog\/micropub\n\n    try:\n        response = requests.post(\n            url=\"https:\/\/micro.blog\/micropub\",\n            headers={\n                \"Authorization\": HEADER_VALUE,\n                \"Content-Type\": \"application\/x-www-form-urlencoded; charset=utf-8\",\n            },\n            data={\n                \"h\": \"entry\",\n                \"content\": content,\n            },\n        )\n        print('Response HTTP Status Code: {status_code}'.format(\n            status_code=response.status_code))\n        print('Response HTTP Response Body: {content}'.format(\n            content=response.content))\n        \n    except requests.exceptions.RequestException:\n        print('HTTP Request failed')\n\n\nsend_request(content)\n\nworkflow.set_output(content)\n"}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"new post","value":{"type":"advancedText","tokenRanges":{"{0, 1}":"Input"},"text":"?"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionStoreVariable","parameters":{"name":"filename","value":{"type":"advancedText","tokenRanges":{"{2, 1}":"%date:yyyy","{4, 1}":"%date:MMMM","{6, 1}":"%date:dd","{8, 1}":"%date:HH","{10, 1}":"%date:mm","{0, 1}":"%editor:filename"},"text":"?-?-?-?-?-?.md"}}},{"pauseBeforeRunning":false,"pauseWithoutShowingParameters":false,"customTitle":"","class":"WorkflowActionSetFileContents","parameters":{"inDropbox":true,"filename":"%var:filename","ifNotExists":0,"text":{"type":"advancedText","tokenRanges":{"{0, 1}":"new post"},"text":"?\n\n"}}}]}